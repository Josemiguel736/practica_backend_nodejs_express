<%- include('header.ejs') %>

<div class="container">

  <p>User ID: <%= session.userName %></p>




  <% if(session.userID){ %>
    
      <h3>Filtro</h3>
    
      
      <form action="/" method="GET">
        <label for="tags">Elige etiquetas:</label>
        <select name="tags" id="tags">
          <% availableTags.forEach(tag => { %>
            <option value="<%= tag %>"><%= tag %></option>
          <% }) %>
        </select>
        <button type="submit">Filtrar</button>
      </form>
    
     
      <h3>Productos</h3>
      <% if (products && products.length > 0) { %>
        <% products.forEach(product => { %>
          <div>
            <h4><%= product.name %></h4>
            <p>Precio: <%= product.price %>â‚¬</p>
            <p>Etiquetas: <%= product.tags.join(", ") %></p>
            <img src="/image/<%= product._id %>" alt="Imagen del producto">
          </div>
        <% }) %>
      <% } else { %>
        <p>No se encontraron productos con las etiquetas seleccionadas.</p>
      <% } %>
      <%}%>
    </div>       
    

</div>

<%- include('footer.ejs') %>