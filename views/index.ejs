<%- include('header.ejs') %>

<div class="container">

  <p>Nombre del usuario: <%= session.userName %></p>




  <% if(session.userID){ %>
    <div class="filter">
      <h3>Filtro</h3>
    
      
      <form action="/" method="GET">
        <label for="tags">Elige etiquetas:</label>
        <select name="tags" id="tags">
          <% availableTags.forEach(tag => { %>
            <option value="<%= tag %>"><%= tag %></option>
          <% }) %>
        </select>
        <button type="submit">Filtrar</button>
      </form>
    </div>
    
     
      <h3>Productos</h3>
      
      <% if (products && products.length > 0) { %>
        <% products.forEach(product => { %>
          <div class="isflex">
            <div class="content">
            <h5><%= product.name %></h5>
            <p><b> Precio:</b> <%= product.price %>â‚¬</p>
            <p><b>Etiquetas:</b> <%= product.tags.join(", ") %></p>
          </div>
            <img class="img" src="/image/<%= product._id %>" alt="Imagen del producto">
            <form action="/product/delete/<%=product._id %>" method="GET">
              <button type="submit" class="btn btn-danger">Eliminar Producto</button>
            </form>
          </div>
        <% }) %>
      <% } else { %>
        <p>No se encontraron productos con las etiquetas seleccionadas.</p>
      <% } %>
      <%}%>
    </div>       
    

</div>

<%- include('footer.ejs') %>